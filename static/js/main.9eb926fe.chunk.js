(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(t,e,a){t.exports=a.p+"static/media/gnpc_commodity_exports.97d62662.csv"},27:function(t,e,a){t.exports=a(37)},32:function(t,e,a){},33:function(t,e,a){t.exports=a.p+"static/media/logo.5d5d9eef.svg"},34:function(t,e,a){},35:function(t,e,a){},37:function(t,e,a){"use strict";a.r(e);var r=a(2),n=a.n(r),i=a(21),o=a.n(i),l=(a(32),a(26)),s=a(9),c=a(10),u=a(14),f=a(12),d=a(15),p=(a(33),a(34),a(13)),h=a.n(p),x=a(25),m=(a(16),a(17)),g=a(22),b=a.n(g),y=a(11),v=(a(35),a(3)),D=a(8),w=a(24),O=(a(38),a(6),a(23)),P=(a(1),function(t){function e(t){var a;return Object(s.a)(this,e),(a=Object(u.a)(this,Object(f.a)(e).call(this,t))).createChart=a.createChart.bind(Object(y.a)(a)),a}return Object(d.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){this.createChart()}},{key:"componentDidUpdate",value:function(){this.createChart()}},{key:"createChart",value:function(){var t=this.props.data?this.props.data:[],e=150,a=450,r=1e3-a-5,n=4e3-e-5,i=Object(v.a)(this.node);console.log(t);var o=Object(D.a)().range([n,0]),l={xOffset:0,yOffset:0,width:150,height:n,labelPositioning:{alpha:.5,spacing:18},leftTitle:"Lifting",rightTitle:"Customer & Destination",leftSubTitle:"Date of Sale",rightSubTitle:"Payment Receipt Date",labelGroupOffset:5,labelKeyOffset:50,radius:6,subTitleYShift:20,unfocusOpacity:.3},s=40,c=10,u="#00cc66",f="#f48320",d="#eee",p=3,x=400,m="Volume (barrels)",g="Price (US$)",b="Revenue (US$)",y=Object(O.a)().attr("class","d3-tip").offset([0,20]).direction(function(t){return"se"}).html(function(t){return function(t,e){var a="<div class='tootltip' style='font-size:12px; border: 1px solid #ccc; background-color: rgba(255,255,255,0.9); padding:5px; max-width:350px; z-index:2000'>";return a+=t?"<div style='font-size:20px'>"+t+"</div>":"",e&&e.forEach(function(t){a+="<br/><strong>"+t.label+":</strong> ",a+="<div class='tootltip-value' style='font-size:18px;'>"+t.value+"</div>"}),a+="</div>"}(t.year,[{label:"Lifting",value:t.Lifting},{label:"Date of Sale",value:t.Date_of_sale.format("D MMM YYYY")},{label:"Payment Receipt Date",value:t.Payment_receipt_date.format("D MMM YYYY")},{label:"Price",value:t.Price},{label:"Volume",value:t.Volume},{label:"Revenue",value:t.Revenue},{label:"Buyer",value:t.Buyer},{label:"Destination",value:t.Destination}])});i.selectAll("g").remove();Object(D.a)().range([0,r]).domain([0,86400]),Object(D.b)(w.a).domain([0,10]);o.domain([new Date(2018,3,30),new Date(2015,0,1)]);var P=i.append("g").attr("class","border-lines").attr("transform","translate("+a+","+e+")");P.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",l.height),P.append("line").attr("x1",l.width).attr("y1",0).attr("x2",l.width).attr("y2",l.height);var Y=i.append("g").selectAll("g").data(t).enter().append("g").attr("transform","translate("+a+","+e+")").attr("class","slope-group").attr("id",function(t,e){t.id="group"+t.Lifting,t.sellDate=t.Date_of_sale.toDate(),t.paymentDate=t.Payment_receipt_date.toDate()}),j=(Y.append("line").attr("class","slope-line").attr("x1",0).attr("y1",function(t){return console.log(t),o(t.sellDate)}).attr("x2",l.width).attr("y2",function(t){return o(t.paymentDate)}),Y.append("circle").attr("r",l.radius).attr("cy",function(t){return o(t.sellDate)}),Y.append("g").attr("class","slope-label-left").each(function(t){t.xLeftPosition=-l.labelGroupOffset,t.yLeftPosition=o(t.sellDate)}));j.append("text").attr("class","label-figure-small").attr("x",function(t){return t.xLeftPosition}).attr("y",function(t){return t.yLeftPosition}).attr("dx",-10).attr("dy",l.subTitleYShift).attr("text-anchor","end").text(function(t){return t.Date_of_sale.format("D MMM YYYY")}),j.append("text").attr("class","label-figure").attr("x",function(t){return t.xLeftPosition}).attr("y",function(t){return t.yLeftPosition}).attr("dx",-10).attr("dy",3).attr("text-anchor","end").text(function(t){return t.Lifting});Y.append("circle").attr("r",l.radius).attr("cx",l.width).attr("cy",function(t){return o(t.paymentDate)});var M=Y.append("g").attr("class","slope-label-right").each(function(t){t.xRightPosition=l.width+l.labelGroupOffset,t.yRightPosition=o(t.paymentDate)});M.append("text").attr("class","label-figure-small").attr("x",function(t){return t.xRightPosition}).attr("y",function(t){return t.yRightPosition}).attr("dx",10).attr("dy",l.subTitleYShift).attr("text-anchor","start").text(function(t){return t.Payment_receipt_date.format("D MMM YYYY")}),M.append("text").attr("class","label-figure").attr("x",function(t){return t.xRightPosition}).attr("y",function(t){return t.yRightPosition}).attr("dx",10).attr("dy",3).attr("text-anchor","start").text(function(t){return t.Buyer+", "+t.Destination});var _=i.append("g").attr("transform","translate(0,"+e+")").attr("class","title");_.append("text").attr("text-anchor","end").attr("x",a).attr("dx",-10).attr("dy",-e/4).text(l.leftTitle),_.append("text").attr("text-anchor","end").attr("class","label-figure-small").attr("x",a).attr("dx",-10).attr("dy",-e/4+l.subTitleYShift).text(l.leftSubTitle),_.append("text").attr("x",a+l.width).attr("dx",10).attr("dy",-e/4).text(l.rightTitle),_.append("text").attr("class","label-figure-small").attr("x",a+l.width).attr("dx",10).attr("dy",-e/4+l.subTitleYShift).text(l.rightSubTitle);var k=i.append("g").attr("transform","translate("+(a+l.width)+","+e+")").attr("class","price"),S=Object(D.a)().range([0,s]).domain([0,70]);k.selectAll(".bar").data(t).enter().append("rect").attr("class","bar").attr("x",function(t){return 2*l.width}).attr("width",function(t){return S(+t.Price)}).attr("y",function(t,e){return t.yRightPosition-c/2}).attr("fill",function(t){return u}).attr("stroke",function(t){return d}).attr("height",function(t){return c}).on("mouseover",function(t){y.show(t,this),Object(v.a)(this).attr("fill",f)}).on("mouseout",function(t){y.hide(),Object(v.a)(this).attr("fill",u)}),_.append("text").attr("text-anchor","start").attr("x",a+3*l.width).attr("dx",-10).attr("dy",-e/4).text(g),_.append("text").attr("text-anchor","start").attr("x",0).attr("dx",0).attr("dy",-e/4).text(m),_.append("text").attr("text-anchor","start").attr("x",a+4*l.width).attr("dx",0).attr("dy",-e/4).text(b);var R=t.map(function(t){return h.a.range(0,Math.round(t.Volume/1e4))});console.log(R);var T=[],E=[];t.forEach(function(t,r){T.push(i.append("g").attr("transform","translate(10,"+e+")").attr("class","volume")),E.push(i.append("g").attr("transform","translate("+(a+4*l.width)+","+e+")").attr("class","volume")),T[r].selectAll(".bar").data(R[r]).enter().append("rect").attr("class","bar").attr("x",function(t,e){return p*e}).attr("width",function(t){return p}).attr("y",function(e,a){return t.yLeftPosition-c/2}).attr("fill",function(t){return u}).attr("stroke",function(t){return d}).attr("height",function(t){return c}).on("mouseover",function(e){y.show(t,this),Object(v.a)(this).attr("fill",f)}).on("mouseout",function(t){y.hide(),Object(v.a)(this).attr("fill",u)}),E[r].selectAll(".bar").data(R[r]).enter().append("rect").attr("class","bar").attr("x",function(e,a){var r=S(+t.Price);return a%Math.floor(x/r)*r}).attr("width",function(e){return S(+t.Price)}).attr("y",function(e,a){var r=S(+t.Price),n=Math.floor(x/r),i=Math.floor(a/n);return t.yRightPosition-c/2+c*i}).attr("fill",function(t){return u}).attr("stroke",function(t){return d}).attr("height",function(t){return c}).on("mouseover",function(e){y.show(t,this),Object(v.a)(this).attr("fill",f)}).on("mouseout",function(t){y.hide(),Object(v.a)(this).attr("fill",u)})}),i.call(y)}},{key:"render",value:function(){var t=this,e=this.props.data?this.props.data:[];return n.a.createElement("div",{className:"MainVizComponent"},n.a.createElement("svg",{className:"MainChart",ref:function(e){return t.node=e},width:1500,height:200*e.length}))}}]),e}(r.Component));P.defaultProps={};var Y=P,j=function(t){function e(){var t,a;Object(s.a)(this,e);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(a=Object(u.a)(this,(t=Object(f.a)(e)).call.apply(t,[this].concat(n)))).state=Object(l.a)({},a.props,{data:[]}),a}return Object(d.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){console.log("mounted"),this.getData()}},{key:"getData",value:function(){var t=this;(function(){var t=[];return t.push(Object(x.a)(b.a)),Promise.all(t).then(function(t){console.log(t);var e=[];return t[0].forEach(function(t){t.Date_of_sale=m(t.Date_of_sale,"YYYY-MM-DD"),t.Payment_receipt_date=m(t.Payment_receipt_date,"YYYY-MM-DD"),e.push(t)}),e})})().then(function(e){t.setState({data:e})})}},{key:"render",value:function(){return console.log(this.state.data),!!h.a.isEmpty(this.state.data)?null:n.a.createElement("div",{className:"App"},n.a.createElement("header",null),n.a.createElement("div",{className:"vizContainer"},n.a.createElement(Y,{data:this.state.data})))}}]),e}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(j,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[27,1,2]]]);
//# sourceMappingURL=main.9eb926fe.chunk.js.map